(this["webpackJsonpcs184-final-proj"]=this["webpackJsonpcs184-final-proj"]||[]).push([[0],{36:function(t,e,n){"use strict";n.r(e);var o=n(9),r=n(14),a=n(12),s=n(8),c=n(29),i=n.n(c),u=n(7),f=n(21),p=(n(40),n(10));function h(t,e){return t>e||t<0?0:315/(64*Math.PI*Math.pow(e,9))*Math.pow(Math.pow(e,2)-Math.pow(t,2),3)}function y(t,e){return t>e||t<0?0:315/(64*Math.PI*Math.pow(e,9))*3*Math.pow(Math.pow(e,2)-Math.pow(t,2),2)*(-2*t)}function l(t,e){return t>e||t<0?0:315/(64*Math.PI*Math.pow(e,9))*3*Math.pow(Math.pow(e,2)-Math.pow(t,2),2)*-2+315/(64*Math.PI*Math.pow(e,9))*6*Math.pow(Math.pow(e,2)-Math.pow(t,2),1)*(-2*t)}function M(t,e){return t>e||t<0?0:45/(Math.PI*Math.pow(e,6))*(e-t)}function w(t,e){return t>e||t<0?0:15/(Math.PI*Math.pow(e,6))*3*Math.pow(e-t,2)*-1}function d(t,e){return new s.Vector3(t.x+e.x,t.y+e.y,t.z+e.z)}function v(t,e){return new s.Vector3(t.x*e,t.y*e,t.z*e)}function j(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)+Math.pow(t.z-e.z,2))}function x(t){var e=t.count,n=(Object(r.a)(t,["count"]),Object(u.useRef)()),c=Object(u.useState)((function(){return new s.Object3D})),i=Object(o.a)(c,1)[0],x=(new s.Plane(new s.Vector3(0,1,0),0),Object(f.c)((function(t){return t.viewport})),Object(u.useMemo)((function(){for(var t=[],n=0;n<e;n++){var o=100*Math.random(),r=0+8*(Math.random()-.5),a=0+2*(Math.random()-.5),c=0+2*(Math.random()-.5),i=new s.Vector3(r,a,c),u=new s.Vector3(0,0,0),f=new s.Vector3(0,0);t.push({t:o,pos:i,force:u,mass:.01,vel:f})}return t}),[e]));return Object(f.b)((function(t){t.state,t.clock;x.forEach((function(t,e){t.density=function(t,e){var n,o=0,r=Object(a.a)(e);try{for(r.s();!(n=r.n()).done;){var s=n.value,c=j(s.pos,t.pos);o+=s.mass*h(c,1)}}catch(i){r.e(i)}finally{r.f()}return t.density=o,o}(t,x)})),x.forEach((function(t,e){t.pressure_force=function(t,e){var n,o=0,r=0,c=0,i=1*(t.density-1),u=Object(a.a)(e);try{for(u.s();!(n=u.n()).done;){var f=n.value,p=1*(f.density-1),h=j(f.pos,t.pos),y=-f.mass*(i+p)/(2*f.density)*w(h,1);if(0!=h){var l=(t.pos.x-f.pos.x)/h,M=(t.pos.y-f.pos.y)/h,d=(t.pos.z-f.pos.z)/h;o+=l*y,r+=M*y,c+=d*y}}}catch(v){u.e(v)}finally{u.f()}return new s.Vector3(o,r,c)}(t,x)})),x.forEach((function(t,e){t.viscosity_force=function(t,e){var n,o=0,r=0,c=0,i=.01,u=Object(a.a)(e);try{for(u.s();!(n=u.n()).done;){var f=n.value,p=j(f.pos,t.pos),h=-f.mass*(f.vel.x-t.vel.x)/f.density*M(p,1),y=-f.mass*(f.vel.y-t.vel.y)/f.density*M(p,1);f.mass,f.vel.z,t.vel.z,f.density,M(p,1),o+=h,r+=y}}catch(l){u.e(l)}finally{u.f()}return o*=i,r*=i,c*=i,new s.Vector3(o,r,c)}(t,x)})),x.forEach((function(t,e){t.gravity_force=function(t,e){var n=1*t.density;return new s.Vector3(0,-9.8*n,0)}(t)})),x.forEach((function(t,e){t.surface_tension=function(t,e){var n,o,r,c,i=0,u=0,f=0,p=0,h=.00728,M=Object(a.a)(e);try{for(M.s();!(c=M.n()).done;){var w=c.value,d=j(t.pos,w.pos),v=1*w.mass/w.density*y(d,1);if(0!=d){var x=(t.pos.x-w.pos.x)/d,b=(t.pos.y-w.pos.y)/d,O=(t.pos.z-w.pos.z)/d;i+=v*x,u+=v*b,f+=v*O,p+=1*w.mass/w.density*l(d,1)/d}}}catch(m){M.e(m)}finally{M.f()}return n=h*i*p,o=h*u*p,r=h*f*p,new s.Vector3(n,o,r)}(t,x)})),x.forEach((function(t,e){var o=t.t,r=(t.factor,t.speed,t.pos),a=(t.mass,t.vel);t.t=o+1;var s=1*t.density,c=1/60,u=v([t.pressure_force,t.viscosity_force,t.gravity_force,t.surface_tension].reduce((function(t,e,n){return d(t,e)})),1/s*c*c),f=d(a,v(u,c)),p=d(r,v(f,c));p.y<-2&&(p.y=-2,f.y*=-1),p.y>2&&(p.y=2,f.y*=-1),p.x<-2&&(p.x=-2,f.x*=-1),p.x>2&&(p.x=2,f.x*=-1),p.z<-2&&(p.z=-2,f.z*=-1),p.z>2&&(p.z=2,f.z*=-1),t.pos=p,t.vel=f,i.position.set(p.x,p.y,p.z),i.scale.set(1,1,1),i.updateMatrix(),n.current.setMatrixAt(e,i.matrix)})),n.current.instanceMatrix.needsUpdate=!0})),Object(p.jsxs)("instancedMesh",{ref:n,args:[null,null,e],children:[Object(p.jsx)("sphereBufferGeometry",{args:[.1,5,5]}),Object(p.jsx)("meshStandardMaterial",{roughness:0,color:"royalblue"})]})}function b(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(f.a,{children:[Object(p.jsx)("color",{attach:"background",args:["#f0f0f0"]}),Object(p.jsx)("ambientLight",{intensity:.5}),Object(p.jsx)("directionalLight",{}),Object(p.jsx)(x,{count:1e3})]})})}i.a.render(Object(p.jsx)(b,{}),document.getElementById("root"))},40:function(t,e,n){}},[[36,1,2]]]);
//# sourceMappingURL=main.a9d805b5.chunk.js.map